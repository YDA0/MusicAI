{"ast":null,"code":"import { StereoXFeedbackEffect } from \"./StereoXFeedbackEffect\";\nimport { optionsFromArguments } from \"../core/util/Defaults\";\nimport { Delay } from \"../core/context/Delay\";\nimport { Signal } from \"../signal/Signal\";\nimport { readOnly } from \"../core/util/Interface\";\n/**\n * PingPongDelay is a feedback delay effect where the echo is heard\n * first in one channel and next in the opposite channel. In a stereo\n * system these are the right and left channels.\n * PingPongDelay in more simplified terms is two Tone.FeedbackDelays\n * with independent delay values. Each delay is routed to one channel\n * (left or right), and the channel triggered second will always\n * trigger at the same interval after the first.\n * @example\n * const pingPong = new Tone.PingPongDelay(\"4n\", 0.2).toDestination();\n * const drum = new Tone.MembraneSynth().connect(pingPong);\n * drum.triggerAttackRelease(\"C4\", \"32n\");\n * @category Effect\n */\nexport class PingPongDelay extends StereoXFeedbackEffect {\n  constructor() {\n    super(optionsFromArguments(PingPongDelay.getDefaults(), arguments, [\"delayTime\", \"feedback\"]));\n    this.name = \"PingPongDelay\";\n    const options = optionsFromArguments(PingPongDelay.getDefaults(), arguments, [\"delayTime\", \"feedback\"]);\n    this._leftDelay = new Delay({\n      context: this.context,\n      maxDelay: options.maxDelay\n    });\n    this._rightDelay = new Delay({\n      context: this.context,\n      maxDelay: options.maxDelay\n    });\n    this._rightPreDelay = new Delay({\n      context: this.context,\n      maxDelay: options.maxDelay\n    });\n    this.delayTime = new Signal({\n      context: this.context,\n      units: \"time\",\n      value: options.delayTime\n    });\n    // connect it up\n    this.connectEffectLeft(this._leftDelay);\n    this.connectEffectRight(this._rightPreDelay, this._rightDelay);\n    this.delayTime.fan(this._leftDelay.delayTime, this._rightDelay.delayTime, this._rightPreDelay.delayTime);\n    // rearranged the feedback to be after the rightPreDelay\n    this._feedbackL.disconnect();\n    this._feedbackL.connect(this._rightDelay);\n    readOnly(this, [\"delayTime\"]);\n  }\n  static getDefaults() {\n    return Object.assign(StereoXFeedbackEffect.getDefaults(), {\n      delayTime: 0.25,\n      maxDelay: 1\n    });\n  }\n  dispose() {\n    super.dispose();\n    this._leftDelay.dispose();\n    this._rightDelay.dispose();\n    this._rightPreDelay.dispose();\n    this.delayTime.dispose();\n    return this;\n  }\n}","map":{"version":3,"names":["StereoXFeedbackEffect","optionsFromArguments","Delay","Signal","readOnly","PingPongDelay","constructor","getDefaults","arguments","name","options","_leftDelay","context","maxDelay","_rightDelay","_rightPreDelay","delayTime","units","value","connectEffectLeft","connectEffectRight","fan","_feedbackL","disconnect","connect","Object","assign","dispose"],"sources":["../../../Tone/effect/PingPongDelay.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,qBAAqB,QAAsC,yBAAyB;AAE7F,SAASC,oBAAoB,QAAQ,uBAAuB;AAC5D,SAASC,KAAK,QAAQ,uBAAuB;AAC7C,SAASC,MAAM,QAAQ,kBAAkB;AACzC,SAASC,QAAQ,QAAQ,wBAAwB;AAOjD;;;;;;;;;;;;;;AAcA,OAAM,MAAOC,aAAc,SAAQL,qBAA2C;EA8B7EM,YAAA;IAEC,KAAK,CAACL,oBAAoB,CAACI,aAAa,CAACE,WAAW,EAAE,EAAEC,SAAS,EAAE,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC;IA9BtF,KAAAC,IAAI,GAAW,eAAe;IA+BtC,MAAMC,OAAO,GAAGT,oBAAoB,CAACI,aAAa,CAACE,WAAW,EAAE,EAAEC,SAAS,EAAE,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;IAEvG,IAAI,CAACG,UAAU,GAAG,IAAIT,KAAK,CAAC;MAC3BU,OAAO,EAAE,IAAI,CAACA,OAAO;MACrBC,QAAQ,EAAEH,OAAO,CAACG;KAClB,CAAC;IACF,IAAI,CAACC,WAAW,GAAG,IAAIZ,KAAK,CAAC;MAC5BU,OAAO,EAAE,IAAI,CAACA,OAAO;MACrBC,QAAQ,EAAEH,OAAO,CAACG;KAClB,CAAC;IACF,IAAI,CAACE,cAAc,GAAG,IAAIb,KAAK,CAAC;MAC/BU,OAAO,EAAE,IAAI,CAACA,OAAO;MACrBC,QAAQ,EAAEH,OAAO,CAACG;KAClB,CAAC;IACF,IAAI,CAACG,SAAS,GAAG,IAAIb,MAAM,CAAC;MAC3BS,OAAO,EAAE,IAAI,CAACA,OAAO;MACrBK,KAAK,EAAE,MAAM;MACbC,KAAK,EAAER,OAAO,CAACM;KACf,CAAC;IAEF;IACA,IAAI,CAACG,iBAAiB,CAAC,IAAI,CAACR,UAAU,CAAC;IACvC,IAAI,CAACS,kBAAkB,CAAC,IAAI,CAACL,cAAc,EAAE,IAAI,CAACD,WAAW,CAAC;IAC9D,IAAI,CAACE,SAAS,CAACK,GAAG,CAAC,IAAI,CAACV,UAAU,CAACK,SAAS,EAAE,IAAI,CAACF,WAAW,CAACE,SAAS,EAAE,IAAI,CAACD,cAAc,CAACC,SAAS,CAAC;IACxG;IACA,IAAI,CAACM,UAAU,CAACC,UAAU,EAAE;IAC5B,IAAI,CAACD,UAAU,CAACE,OAAO,CAAC,IAAI,CAACV,WAAW,CAAC;IACzCV,QAAQ,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC,CAAC;EAC9B;EAEA,OAAOG,WAAWA,CAAA;IACjB,OAAOkB,MAAM,CAACC,MAAM,CAAC1B,qBAAqB,CAACO,WAAW,EAAE,EAAE;MACzDS,SAAS,EAAE,IAAI;MACfH,QAAQ,EAAE;KACV,CAAC;EACH;EAEAc,OAAOA,CAAA;IACN,KAAK,CAACA,OAAO,EAAE;IACf,IAAI,CAAChB,UAAU,CAACgB,OAAO,EAAE;IACzB,IAAI,CAACb,WAAW,CAACa,OAAO,EAAE;IAC1B,IAAI,CAACZ,cAAc,CAACY,OAAO,EAAE;IAC7B,IAAI,CAACX,SAAS,CAACW,OAAO,EAAE;IACxB,OAAO,IAAI;EACZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}