{"ast":null,"code":"import { dbToGain, gainToDb } from \"../type/Conversions\";\nimport { isAudioParam } from \"../util/AdvancedTypeCheck\";\nimport { optionsFromArguments } from \"../util/Defaults\";\nimport { Timeline } from \"../util/Timeline\";\nimport { isDefined } from \"../util/TypeCheck\";\nimport { ToneWithContext } from \"./ToneWithContext\";\nimport { EQ } from \"../util/Math\";\nimport { assert, assertRange } from \"../util/Debug\";\n/**\n * Param wraps the native Web Audio's AudioParam to provide\n * additional unit conversion functionality. It also\n * serves as a base-class for classes which have a single,\n * automatable parameter.\n * @category Core\n */\nexport class Param extends ToneWithContext {\n  constructor() {\n    super(optionsFromArguments(Param.getDefaults(), arguments, [\"param\", \"units\", \"convert\"]));\n    this.name = \"Param\";\n    this.overridden = false;\n    /**\n     * The minimum output value\n     */\n    this._minOutput = 1e-7;\n    const options = optionsFromArguments(Param.getDefaults(), arguments, [\"param\", \"units\", \"convert\"]);\n    assert(isDefined(options.param) && (isAudioParam(options.param) || options.param instanceof Param), \"param must be an AudioParam\");\n    while (!isAudioParam(options.param)) {\n      options.param = options.param._param;\n    }\n    this._swappable = isDefined(options.swappable) ? options.swappable : false;\n    if (this._swappable) {\n      this.input = this.context.createGain();\n      // initialize\n      this._param = options.param;\n      this.input.connect(this._param);\n    } else {\n      this._param = this.input = options.param;\n    }\n    this._events = new Timeline(1000);\n    this._initialValue = this._param.defaultValue;\n    this.units = options.units;\n    this.convert = options.convert;\n    this._minValue = options.minValue;\n    this._maxValue = options.maxValue;\n    // if the value is defined, set it immediately\n    if (isDefined(options.value) && options.value !== this._toType(this._initialValue)) {\n      this.setValueAtTime(options.value, 0);\n    }\n  }\n  static getDefaults() {\n    return Object.assign(ToneWithContext.getDefaults(), {\n      convert: true,\n      units: \"number\"\n    });\n  }\n  get value() {\n    const now = this.now();\n    return this.getValueAtTime(now);\n  }\n  set value(value) {\n    this.cancelScheduledValues(this.now());\n    this.setValueAtTime(value, this.now());\n  }\n  get minValue() {\n    // if it's not the default minValue, return it\n    if (isDefined(this._minValue)) {\n      return this._minValue;\n    } else if (this.units === \"time\" || this.units === \"frequency\" || this.units === \"normalRange\" || this.units === \"positive\" || this.units === \"transportTime\" || this.units === \"ticks\" || this.units === \"bpm\" || this.units === \"hertz\" || this.units === \"samples\") {\n      return 0;\n    } else if (this.units === \"audioRange\") {\n      return -1;\n    } else if (this.units === \"decibels\") {\n      return -Infinity;\n    } else {\n      return this._param.minValue;\n    }\n  }\n  get maxValue() {\n    if (isDefined(this._maxValue)) {\n      return this._maxValue;\n    } else if (this.units === \"normalRange\" || this.units === \"audioRange\") {\n      return 1;\n    } else {\n      return this._param.maxValue;\n    }\n  }\n  /**\n   * Type guard based on the unit name\n   */\n  _is(arg, type) {\n    return this.units === type;\n  }\n  /**\n   * Make sure the value is always in the defined range\n   */\n  _assertRange(value) {\n    if (isDefined(this.maxValue) && isDefined(this.minValue)) {\n      assertRange(value, this._fromType(this.minValue), this._fromType(this.maxValue));\n    }\n    return value;\n  }\n  /**\n   * Convert the given value from the type specified by Param.units\n   * into the destination value (such as Gain or Frequency).\n   */\n  _fromType(val) {\n    if (this.convert && !this.overridden) {\n      if (this._is(val, \"time\")) {\n        return this.toSeconds(val);\n      } else if (this._is(val, \"decibels\")) {\n        return dbToGain(val);\n      } else if (this._is(val, \"frequency\")) {\n        return this.toFrequency(val);\n      } else {\n        return val;\n      }\n    } else if (this.overridden) {\n      // if it's overridden, should only schedule 0s\n      return 0;\n    } else {\n      return val;\n    }\n  }\n  /**\n   * Convert the parameters value into the units specified by Param.units.\n   */\n  _toType(val) {\n    if (this.convert && this.units === \"decibels\") {\n      return gainToDb(val);\n    } else {\n      return val;\n    }\n  }\n  //-------------------------------------\n  // ABSTRACT PARAM INTERFACE\n  // all docs are generated from ParamInterface.ts\n  //-------------------------------------\n  setValueAtTime(value, time) {\n    const computedTime = this.toSeconds(time);\n    const numericValue = this._fromType(value);\n    assert(isFinite(numericValue) && isFinite(computedTime), `Invalid argument(s) to setValueAtTime: ${JSON.stringify(value)}, ${JSON.stringify(time)}`);\n    this._assertRange(numericValue);\n    this.log(this.units, \"setValueAtTime\", value, computedTime);\n    this._events.add({\n      time: computedTime,\n      type: \"setValueAtTime\",\n      value: numericValue\n    });\n    this._param.setValueAtTime(numericValue, computedTime);\n    return this;\n  }\n  getValueAtTime(time) {\n    const computedTime = Math.max(this.toSeconds(time), 0);\n    const after = this._events.getAfter(computedTime);\n    const before = this._events.get(computedTime);\n    let value = this._initialValue;\n    // if it was set by\n    if (before === null) {\n      value = this._initialValue;\n    } else if (before.type === \"setTargetAtTime\" && (after === null || after.type === \"setValueAtTime\")) {\n      const previous = this._events.getBefore(before.time);\n      let previousVal;\n      if (previous === null) {\n        previousVal = this._initialValue;\n      } else {\n        previousVal = previous.value;\n      }\n      if (before.type === \"setTargetAtTime\") {\n        value = this._exponentialApproach(before.time, previousVal, before.value, before.constant, computedTime);\n      }\n    } else if (after === null) {\n      value = before.value;\n    } else if (after.type === \"linearRampToValueAtTime\" || after.type === \"exponentialRampToValueAtTime\") {\n      let beforeValue = before.value;\n      if (before.type === \"setTargetAtTime\") {\n        const previous = this._events.getBefore(before.time);\n        if (previous === null) {\n          beforeValue = this._initialValue;\n        } else {\n          beforeValue = previous.value;\n        }\n      }\n      if (after.type === \"linearRampToValueAtTime\") {\n        value = this._linearInterpolate(before.time, beforeValue, after.time, after.value, computedTime);\n      } else {\n        value = this._exponentialInterpolate(before.time, beforeValue, after.time, after.value, computedTime);\n      }\n    } else {\n      value = before.value;\n    }\n    return this._toType(value);\n  }\n  setRampPoint(time) {\n    time = this.toSeconds(time);\n    let currentVal = this.getValueAtTime(time);\n    this.cancelAndHoldAtTime(time);\n    if (this._fromType(currentVal) === 0) {\n      currentVal = this._toType(this._minOutput);\n    }\n    this.setValueAtTime(currentVal, time);\n    return this;\n  }\n  linearRampToValueAtTime(value, endTime) {\n    const numericValue = this._fromType(value);\n    const computedTime = this.toSeconds(endTime);\n    assert(isFinite(numericValue) && isFinite(computedTime), `Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(value)}, ${JSON.stringify(endTime)}`);\n    this._assertRange(numericValue);\n    this._events.add({\n      time: computedTime,\n      type: \"linearRampToValueAtTime\",\n      value: numericValue\n    });\n    this.log(this.units, \"linearRampToValueAtTime\", value, computedTime);\n    this._param.linearRampToValueAtTime(numericValue, computedTime);\n    return this;\n  }\n  exponentialRampToValueAtTime(value, endTime) {\n    let numericValue = this._fromType(value);\n    // the value can't be 0\n    numericValue = EQ(numericValue, 0) ? this._minOutput : numericValue;\n    this._assertRange(numericValue);\n    const computedTime = this.toSeconds(endTime);\n    assert(isFinite(numericValue) && isFinite(computedTime), `Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(value)}, ${JSON.stringify(endTime)}`);\n    // store the event\n    this._events.add({\n      time: computedTime,\n      type: \"exponentialRampToValueAtTime\",\n      value: numericValue\n    });\n    this.log(this.units, \"exponentialRampToValueAtTime\", value, computedTime);\n    this._param.exponentialRampToValueAtTime(numericValue, computedTime);\n    return this;\n  }\n  exponentialRampTo(value, rampTime, startTime) {\n    startTime = this.toSeconds(startTime);\n    this.setRampPoint(startTime);\n    this.exponentialRampToValueAtTime(value, startTime + this.toSeconds(rampTime));\n    return this;\n  }\n  linearRampTo(value, rampTime, startTime) {\n    startTime = this.toSeconds(startTime);\n    this.setRampPoint(startTime);\n    this.linearRampToValueAtTime(value, startTime + this.toSeconds(rampTime));\n    return this;\n  }\n  targetRampTo(value, rampTime, startTime) {\n    startTime = this.toSeconds(startTime);\n    this.setRampPoint(startTime);\n    this.exponentialApproachValueAtTime(value, startTime, rampTime);\n    return this;\n  }\n  exponentialApproachValueAtTime(value, time, rampTime) {\n    time = this.toSeconds(time);\n    rampTime = this.toSeconds(rampTime);\n    const timeConstant = Math.log(rampTime + 1) / Math.log(200);\n    this.setTargetAtTime(value, time, timeConstant);\n    // at 90% start a linear ramp to the final value\n    this.cancelAndHoldAtTime(time + rampTime * 0.9);\n    this.linearRampToValueAtTime(value, time + rampTime);\n    return this;\n  }\n  setTargetAtTime(value, startTime, timeConstant) {\n    const numericValue = this._fromType(value);\n    // The value will never be able to approach without timeConstant > 0.\n    assert(isFinite(timeConstant) && timeConstant > 0, \"timeConstant must be a number greater than 0\");\n    const computedTime = this.toSeconds(startTime);\n    this._assertRange(numericValue);\n    assert(isFinite(numericValue) && isFinite(computedTime), `Invalid argument(s) to setTargetAtTime: ${JSON.stringify(value)}, ${JSON.stringify(startTime)}`);\n    this._events.add({\n      constant: timeConstant,\n      time: computedTime,\n      type: \"setTargetAtTime\",\n      value: numericValue\n    });\n    this.log(this.units, \"setTargetAtTime\", value, computedTime, timeConstant);\n    this._param.setTargetAtTime(numericValue, computedTime, timeConstant);\n    return this;\n  }\n  setValueCurveAtTime(values, startTime, duration, scaling = 1) {\n    duration = this.toSeconds(duration);\n    startTime = this.toSeconds(startTime);\n    const startingValue = this._fromType(values[0]) * scaling;\n    this.setValueAtTime(this._toType(startingValue), startTime);\n    const segTime = duration / (values.length - 1);\n    for (let i = 1; i < values.length; i++) {\n      const numericValue = this._fromType(values[i]) * scaling;\n      this.linearRampToValueAtTime(this._toType(numericValue), startTime + i * segTime);\n    }\n    return this;\n  }\n  cancelScheduledValues(time) {\n    const computedTime = this.toSeconds(time);\n    assert(isFinite(computedTime), `Invalid argument to cancelScheduledValues: ${JSON.stringify(time)}`);\n    this._events.cancel(computedTime);\n    this._param.cancelScheduledValues(computedTime);\n    this.log(this.units, \"cancelScheduledValues\", computedTime);\n    return this;\n  }\n  cancelAndHoldAtTime(time) {\n    const computedTime = this.toSeconds(time);\n    const valueAtTime = this._fromType(this.getValueAtTime(computedTime));\n    // remove the schedule events\n    assert(isFinite(computedTime), `Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(time)}`);\n    this.log(this.units, \"cancelAndHoldAtTime\", computedTime, \"value=\" + valueAtTime);\n    // if there is an event at the given computedTime\n    // and that even is not a \"set\"\n    const before = this._events.get(computedTime);\n    const after = this._events.getAfter(computedTime);\n    if (before && EQ(before.time, computedTime)) {\n      // remove everything after\n      if (after) {\n        this._param.cancelScheduledValues(after.time);\n        this._events.cancel(after.time);\n      } else {\n        this._param.cancelAndHoldAtTime(computedTime);\n        this._events.cancel(computedTime + this.sampleTime);\n      }\n    } else if (after) {\n      this._param.cancelScheduledValues(after.time);\n      // cancel the next event(s)\n      this._events.cancel(after.time);\n      if (after.type === \"linearRampToValueAtTime\") {\n        this.linearRampToValueAtTime(this._toType(valueAtTime), computedTime);\n      } else if (after.type === \"exponentialRampToValueAtTime\") {\n        this.exponentialRampToValueAtTime(this._toType(valueAtTime), computedTime);\n      }\n    }\n    // set the value at the given time\n    this._events.add({\n      time: computedTime,\n      type: \"setValueAtTime\",\n      value: valueAtTime\n    });\n    this._param.setValueAtTime(valueAtTime, computedTime);\n    return this;\n  }\n  rampTo(value, rampTime = 0.1, startTime) {\n    if (this.units === \"frequency\" || this.units === \"bpm\" || this.units === \"decibels\") {\n      this.exponentialRampTo(value, rampTime, startTime);\n    } else {\n      this.linearRampTo(value, rampTime, startTime);\n    }\n    return this;\n  }\n  /**\n   * Apply all of the previously scheduled events to the passed in Param or AudioParam.\n   * The applied values will start at the context's current time and schedule\n   * all of the events which are scheduled on this Param onto the passed in param.\n   */\n  apply(param) {\n    const now = this.context.currentTime;\n    // set the param's value at the current time and schedule everything else\n    param.setValueAtTime(this.getValueAtTime(now), now);\n    // if the previous event was a curve, then set the rest of it\n    const previousEvent = this._events.get(now);\n    if (previousEvent && previousEvent.type === \"setTargetAtTime\") {\n      // approx it until the next event with linear ramps\n      const nextEvent = this._events.getAfter(previousEvent.time);\n      // or for 2 seconds if there is no event\n      const endTime = nextEvent ? nextEvent.time : now + 2;\n      const subdivisions = (endTime - now) / 10;\n      for (let i = now; i < endTime; i += subdivisions) {\n        param.linearRampToValueAtTime(this.getValueAtTime(i), i);\n      }\n    }\n    this._events.forEachAfter(this.context.currentTime, event => {\n      if (event.type === \"cancelScheduledValues\") {\n        param.cancelScheduledValues(event.time);\n      } else if (event.type === \"setTargetAtTime\") {\n        param.setTargetAtTime(event.value, event.time, event.constant);\n      } else {\n        param[event.type](event.value, event.time);\n      }\n    });\n    return this;\n  }\n  /**\n   * Replace the Param's internal AudioParam. Will apply scheduled curves\n   * onto the parameter and replace the connections.\n   */\n  setParam(param) {\n    assert(this._swappable, \"The Param must be assigned as 'swappable' in the constructor\");\n    const input = this.input;\n    input.disconnect(this._param);\n    this.apply(param);\n    this._param = param;\n    input.connect(this._param);\n    return this;\n  }\n  dispose() {\n    super.dispose();\n    this._events.dispose();\n    return this;\n  }\n  get defaultValue() {\n    return this._toType(this._param.defaultValue);\n  }\n  //-------------------------------------\n  // \tAUTOMATION CURVE CALCULATIONS\n  // \tMIT License, copyright (c) 2014 Jordan Santell\n  //-------------------------------------\n  // Calculates the the value along the curve produced by setTargetAtTime\n  _exponentialApproach(t0, v0, v1, timeConstant, t) {\n    return v1 + (v0 - v1) * Math.exp(-(t - t0) / timeConstant);\n  }\n  // Calculates the the value along the curve produced by linearRampToValueAtTime\n  _linearInterpolate(t0, v0, t1, v1, t) {\n    return v0 + (v1 - v0) * ((t - t0) / (t1 - t0));\n  }\n  // Calculates the the value along the curve produced by exponentialRampToValueAtTime\n  _exponentialInterpolate(t0, v0, t1, v1, t) {\n    return v0 * Math.pow(v1 / v0, (t - t0) / (t1 - t0));\n  }\n}","map":{"version":3,"names":["dbToGain","gainToDb","isAudioParam","optionsFromArguments","Timeline","isDefined","ToneWithContext","EQ","assert","assertRange","Param","constructor","getDefaults","arguments","name","overridden","_minOutput","options","param","_param","_swappable","swappable","input","context","createGain","connect","_events","_initialValue","defaultValue","units","convert","_minValue","minValue","_maxValue","maxValue","value","_toType","setValueAtTime","Object","assign","now","getValueAtTime","cancelScheduledValues","Infinity","_is","arg","type","_assertRange","_fromType","val","toSeconds","toFrequency","time","computedTime","numericValue","isFinite","JSON","stringify","log","add","Math","max","after","getAfter","before","get","previous","getBefore","previousVal","_exponentialApproach","constant","beforeValue","_linearInterpolate","_exponentialInterpolate","setRampPoint","currentVal","cancelAndHoldAtTime","linearRampToValueAtTime","endTime","exponentialRampToValueAtTime","exponentialRampTo","rampTime","startTime","linearRampTo","targetRampTo","exponentialApproachValueAtTime","timeConstant","setTargetAtTime","setValueCurveAtTime","values","duration","scaling","startingValue","segTime","length","i","cancel","valueAtTime","sampleTime","rampTo","apply","currentTime","previousEvent","nextEvent","subdivisions","forEachAfter","event","setParam","disconnect","dispose","t0","v0","v1","t","exp","t1","pow"],"sources":["../../../../Tone/core/context/Param.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}