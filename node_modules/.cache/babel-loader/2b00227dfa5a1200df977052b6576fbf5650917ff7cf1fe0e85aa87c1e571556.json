{"ast":null,"code":"import { Param } from \"../../core/context/Param\";\nimport { ToneAudioNode } from \"../../core/context/ToneAudioNode\";\nimport { optionsFromArguments } from \"../../core/util/Defaults\";\nimport { readOnly } from \"../../core/util/Interface\";\n/**\n * Compressor is a thin wrapper around the Web Audio\n * [DynamicsCompressorNode](http://webaudio.github.io/web-audio-api/#the-dynamicscompressornode-interface).\n * Compression reduces the volume of loud sounds or amplifies quiet sounds\n * by narrowing or \"compressing\" an audio signal's dynamic range.\n * Read more on [Wikipedia](https://en.wikipedia.org/wiki/Dynamic_range_compression).\n * @example\n * const comp = new Tone.Compressor(-30, 3);\n * @category Component\n */\nexport class Compressor extends ToneAudioNode {\n  constructor() {\n    super(optionsFromArguments(Compressor.getDefaults(), arguments, [\"threshold\", \"ratio\"]));\n    this.name = \"Compressor\";\n    /**\n     * the compressor node\n     */\n    this._compressor = this.context.createDynamicsCompressor();\n    this.input = this._compressor;\n    this.output = this._compressor;\n    const options = optionsFromArguments(Compressor.getDefaults(), arguments, [\"threshold\", \"ratio\"]);\n    this.threshold = new Param({\n      minValue: this._compressor.threshold.minValue,\n      maxValue: this._compressor.threshold.maxValue,\n      context: this.context,\n      convert: false,\n      param: this._compressor.threshold,\n      units: \"decibels\",\n      value: options.threshold\n    });\n    this.attack = new Param({\n      minValue: this._compressor.attack.minValue,\n      maxValue: this._compressor.attack.maxValue,\n      context: this.context,\n      param: this._compressor.attack,\n      units: \"time\",\n      value: options.attack\n    });\n    this.release = new Param({\n      minValue: this._compressor.release.minValue,\n      maxValue: this._compressor.release.maxValue,\n      context: this.context,\n      param: this._compressor.release,\n      units: \"time\",\n      value: options.release\n    });\n    this.knee = new Param({\n      minValue: this._compressor.knee.minValue,\n      maxValue: this._compressor.knee.maxValue,\n      context: this.context,\n      convert: false,\n      param: this._compressor.knee,\n      units: \"decibels\",\n      value: options.knee\n    });\n    this.ratio = new Param({\n      minValue: this._compressor.ratio.minValue,\n      maxValue: this._compressor.ratio.maxValue,\n      context: this.context,\n      convert: false,\n      param: this._compressor.ratio,\n      units: \"positive\",\n      value: options.ratio\n    });\n    // set the defaults\n    readOnly(this, [\"knee\", \"release\", \"attack\", \"ratio\", \"threshold\"]);\n  }\n  static getDefaults() {\n    return Object.assign(ToneAudioNode.getDefaults(), {\n      attack: 0.003,\n      knee: 30,\n      ratio: 12,\n      release: 0.25,\n      threshold: -24\n    });\n  }\n  /**\n   * A read-only decibel value for metering purposes, representing the current amount of gain\n   * reduction that the compressor is applying to the signal. If fed no signal the value will be 0 (no gain reduction).\n   */\n  get reduction() {\n    return this._compressor.reduction;\n  }\n  dispose() {\n    super.dispose();\n    this._compressor.disconnect();\n    this.attack.dispose();\n    this.release.dispose();\n    this.threshold.dispose();\n    this.ratio.dispose();\n    this.knee.dispose();\n    return this;\n  }\n}","map":{"version":3,"names":["Param","ToneAudioNode","optionsFromArguments","readOnly","Compressor","constructor","getDefaults","arguments","name","_compressor","context","createDynamicsCompressor","input","output","options","threshold","minValue","maxValue","convert","param","units","value","attack","release","knee","ratio","Object","assign","reduction","dispose","disconnect"],"sources":["../../../../Tone/component/dynamics/Compressor.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}